<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Emergency Start - No Buttons</title>
    <style>
        body { margin: 0; background: #001a33; overflow: hidden; touch-action: none; }
        canvas { display: block; }
        #msg { 
            position: absolute; top: 10px; width: 100%; text-align: center; 
            color: white; font-family: sans-serif; pointer-events: none;
        }
    </style>
</head>
<body>

<div id="msg"><h1>المرحلة 3: النسر (بدء تلقائي)</h1><p>اضغط في أي مكان للقفز</p></div>
<canvas id="G"></canvas>

<script>
    const cvs = document.getElementById('G');
    const c = cvs.getContext('2d');

    function res() { cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
    window.addEventListener('resize', res); res();

    // متغيرات بسيطة جداً لضمان العمل
    let py = cvs.height / 2, pv = 0; // القطة
    let ex = -100, ey = cvs.height / 2; // النسر
    let pipes = [];

    function draw() {
        // خلفية زرقاء غامقة
        c.fillStyle = '#001a33';
        c.fillRect(0, 0, cvs.width, cvs.height);

        // تحريك القطة (المربع البرتقالي)
        pv += 0.5;
        py += pv;

        // تحريك النسر (المربع الأحمر)
        ey += (py - ey) * 0.05;
        ex = Math.min(50, ex + 0.5);

        // إنتاج العوائق
        if (pipes.length === 0 || pipes[pipes.length - 1].x < cvs.width - 300) {
            pipes.push({ x: cvs.width, h: Math.random() * (cvs.height - 300) + 50 });
        }

        // رسم العوائق
        c.fillStyle = "white";
        pipes.forEach((p, i) => {
            p.x -= 6;
            c.fillRect(p.x, 0, 50, p.h);
            c.fillRect(p.x, p.h + 250, 50, cvs.height);

            // تصادم مع العوائق
            if (100 > p.x && 50 < p.x + 50 && (py < p.h || py + 40 > p.h + 250)) location.reload();
            if (p.x < -60) pipes.splice(i, 1);
        });

        // رسم القطة والنسر
        c.fillStyle = "#ff9800"; c.fillRect(50, py, 40, 40); // القطة
        c.fillStyle = "#ff0000"; c.fillRect(ex, ey, 50, 50); // النسر

        // الخسارة
        if (py > cvs.height || py < 0 || 50 < ex + 40) location.reload();

        requestAnimationFrame(draw);
    }

    // القفز عند اللمس
    window.onmousedown = () => { pv = -9; };
    window.ontouchstart = (e) => { e.preventDefault(); pv = -9; };

    // انطلاق المحرك تلقائياً
    draw();
</script>
</body>
</html>