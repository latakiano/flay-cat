<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Eagle Level - Fix</title>
    <style>
        body { margin: 0; background: #001a33; overflow: hidden; touch-action: none; font-family: sans-serif; }
        canvas { display: block; }
        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); display: flex; flex-direction: column; 
            justify-content: center; align-items: center; color: white; z-index: 100; 
        }
        button { 
            padding: 25px 60px; font-size: 30px; cursor: pointer; border-radius: 20px; 
            border: none; background: #e67e22; color: white; font-weight: bold;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
    </style>
</head>
<body>

<div id="overlay">
    <h1 style="font-size: 40px; margin-bottom: 20px;">ğŸ¦… Ø¬Ø¨Ø§Ù„ Ø§Ù„Ù†Ø³ÙˆØ±</h1>
    <button id="startBtn">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ù‚ÙØ²! ğŸ¾</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const overlay = document.getElementById('overlay');
    const startBtn = document.getElementById('startBtn');

    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener('resize', resize); resize();

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ù…Ø¹ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¬Ø§Ù‡Ø²ÙŠØªÙ‡Ø§
    const catImg = new Image(); catImg.src = 'https://img.icons8.com/color/96/cat--v1.png';
    const eagleImg = new Image(); eagleImg.src = 'https://img.icons8.com/color/150/eagle.png';

    let gameActive = false;
    let player = { x: 80, y: 0, v: 0, gravity: 0.5 };
    let eagle = { x: -120, y: 0 };
    let obstacles = [];

    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©
    function ignite() {
        overlay.style.display = 'none';
        player.y = canvas.height / 2;
        eagle.y = canvas.height / 2;
        gameActive = true;
        // Ø¨Ø¯Ø¡ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© ÙÙˆØ±Ø§Ù‹
        requestAnimationFrame(update);
    }

    // Ø±Ø¨Ø· Ø§Ù„Ø²Ø± Ø¨Ø§Ù„ØªØ´ØºÙŠÙ„
    startBtn.onclick = ignite;

    function update() {
        if (!gameActive) return;

        // Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Ø´Ø© ÙˆØ±Ø³Ù… Ø§Ù„Ø®Ù„ÙÙŠØ©
        ctx.fillStyle = '#001a33';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù‚Ø·Ø©
        player.v += player.gravity;
        player.y += player.v;

        // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù†Ø³Ø±
        eagle.y += (player.y - 80 - eagle.y) * 0.1;
        eagle.x = Math.min(player.x - 100, eagle.x + 0.5);

        // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª
        if (obstacles.length === 0 || obstacles[obstacles.length - 1].x < canvas.width - 300) {
            obstacles.push({ x: canvas.width, t: Math.random() * (canvas.height - 300) + 50, w: 60, g: 260 });
        }

        ctx.fillStyle = "white";
        obstacles.forEach((o, i) => {
            o.x -= 6;
            ctx.fillRect(o.x, 0, o.w, o.t);
            ctx.fillRect(o.x, o.t + o.g, o.w, canvas.height);
            
            // ØªØµØ§Ø¯Ù…
            if (player.x + 30 > o.x && player.x + 10 < o.x + o.w && (player.y + 10 < o.t || player.y + 40 > o.t + o.g)) {
                location.reload(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø³Ø§Ø±Ø©
            }
            if (o.x < -100) obstacles.splice(i, 1);
        });

        // Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ø§Ø´Ø© ÙˆØ§Ù„Ù†Ø³Ø±
        if (player.y > canvas.height || player.y < 0 || player.x < eagle.x + 50) {
            location.reload();
        }

        // Ø±Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ§Øª
        ctx.drawImage(eagleImg, eagle.x, eagle.y, 110, 110);
        ctx.drawImage(catImg, player.x, player.y, 50, 50);

        requestAnimationFrame(update);
    }

    // Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù‚ÙØ²
    const jump = (e) => { if (gameActive) { player.v = -9; e.preventDefault(); } };
    window.addEventListener('mousedown', jump);
    window.addEventListener('touchstart', jump, { passive: false });

</script>
</body>
</html>